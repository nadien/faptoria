module.exports = {
    unescapeRequest: function (request) {
        var key, url;
        url = "" + request.protocol + "://" + request.headers.host + request.path + "#!" + request.query['_escaped_fragment_'] + "?";
        delete request.query['_escaped_fragment_'];
        for (key in request.query) {
            url += "" + key + "=" + request.query[key] + "&";
        }
        url = url.replace(/&$/g, '');
        return url;
    },
    isEscapedRequest: function (request) {
        return request.query._escaped_fragment_ != null;
    }
};
